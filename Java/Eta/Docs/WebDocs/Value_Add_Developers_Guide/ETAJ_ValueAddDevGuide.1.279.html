<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>8.2.4.2 Setting Example</title>
    <link rel="StyleSheet" href="css/ETAJ_ValueAddDevGuide.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55718642-4', 'auto');
  ga('send', 'pageview');

</script>
  </head>
  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <table width="100%" align="left" role="presentation">
      <tr>
        <td class="WebWorks_Company_Name_Top" width="250">
          <div id="boxC">Transport API Java Edition</div>
        </td>
        <td width="30">
          <div id="boxB"></div>
        </td>
        <td width="*"></td>
        <td class="WebWorks_Company_Logo_Top" width="160">
          <div id="boxA">
            <img align="left" src="banner_logo.gif" alt="Transport API Java Edition" />
          </div>
        </td>
      </tr>
    </table>
    <br clear="all" />
    <hr align="left" />
    <blockquote>
      <div class="Heading_4"><a name="9004747">Setting Example</a></div>
      <div class="Normal"><a name="9004748">In the following example, two cache instances are created and set to a single, shared field dictionary.</a></div>
      <div class="Code"><a name="9004749">&nbsp;</a></div>
      <div class="Code"><a name="9004750">PayloadCacheConfigOptions cacheConfig = CacheFactory.</a><span class="Char_Variable" style="color: #666666; font-family: Arial; font-size: 10pt; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">createPayloadCacheConfig()</span>;</div>
      <div class="Code"><a name="9004751">cacheConfig.maxItems(0); </a><span class="Char_Green" style="color: green; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">/* unlimited */</span></div>
      <div class="Code"><a name="9004752">&nbsp;</a></div>
      <div class="Code"><span class="Char_Green" style="color: green; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="9004753">/* For simplicity in this code fragment, CHK is assumed to be a macro for</a></span></div>
      <div class="Code"><span class="Char_Green" style="color: green; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="9004754">error handling (performing cleanup and returning from method). */</a></span></div>
      <div class="Code"><a name="9004755">&nbsp;</a></div>
      <div class="Code"><span class="Char_Green" style="color: green; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="9004756">/* create cache instances */</a></span></div>
      <div class="Code"><a name="9004757">CacheError cacheError = CacheFactory.</a><span class="Char_Variable" style="color: #666666; font-family: Arial; font-size: 10pt; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">createCacheError()</span>;</div>
      <div class="Code"><a name="9004758">PayloadCache cacheInstance1 = CacheFactory.</a><span class="Char_Variable" style="color: #666666; font-family: Arial; font-size: 10pt; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">createPayloadCache</span>(cacheConfig, cacheError);</div>
      <div class="Code"><span class="Char_Purple" style="color: #7F0055; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><a name="9004759">if</a></span> (cacheInstance1 == <span class="Char_Purple" style="color: #7F0055; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline">null</span>)</div>
      <div class="Code"><a name="9004760">{</a></div>
      <div class="Code"><a name="9004761">	System.</a><span class="Char_Blue_Italics" style="color: navy; font-family: Arial; font-size: 10pt; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">out</span>.println(<span style="color: #2A00FF">"</span><span class="Char_Blue" style="color: #2A00FF">CacheFactory.createPayloadCache failure:</span><span style="color: #2A00FF"> "</span> + cacheError.text());</div>
      <div class="Code"><a name="9004762">	</a><span style="text-decoration: underline">CHK</span>(cacheError.errorId());</div>
      <div class="Code"><a name="9004763">}</a></div>
      <div class="Code"><a name="9004764">&nbsp;</a></div>
      <div class="Code"><a name="9004765">PayloadCache cacheInstance2 = CacheFactory.</a><span class="Char_Variable" style="color: #666666; font-family: Arial; font-size: 10pt; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">createPayloadCache</span>(cacheConfig, cacheError);</div>
      <div class="Code"><span class="Char_Purple" style="color: #7F0055; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><a name="9004766">if</a></span> (cacheInstance2 == <span class="Char_Purple" style="color: #7F0055; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline">null</span>)</div>
      <div class="Code"><a name="9004767">{</a></div>
      <div class="Code"><a name="9004768">	System.</a><span class="Char_Blue_Italics" style="color: navy; font-family: Arial; font-size: 10pt; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">out</span>.println(<span class="Char_Blue" style="color: navy; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">"CacheFactory.createPayloadCache failure: "</span> + cacheError.text());</div>
      <div class="Code"><a name="9004769">	</a><span style="text-decoration: underline">CHK</span>(cacheError.errorId());</div>
      <div class="Code"><a name="9004770">}</a></div>
      <div class="Code"><a name="9004771">&nbsp;</a></div>
      <div class="Code"><span class="Char_Green" style="color: green; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="9004772">/* Load an RDM Field Dictionary structure from file: set to each cache. */</a></span></div>
      <div class="Code"><a name="9004773">DataDictionary dataDictionary = CodecFactory.</a><span class="Char_Variable" style="color: #666666; font-family: Arial; font-size: 10pt; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">createDataDictionary()</span>;</div>
      <div class="Code"><a name="9004774">com.thomsonreuters.upa.transport.Error error = TransportFactory.</a><span class="Char_Variable" style="color: #666666; font-family: Arial; font-size: 10pt; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">createError()</span>;</div>
      <div class="Code"><span class="Char_Purple" style="color: #7F0055; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><a name="9004775">int</a></span> ret = dataDictionary.loadFieldDictionary(<span class="Char_Blue" style="color: navy; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">"RDMFieldDictionary"</span>, error); <span class="Char_Underline" style="color: #666666; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; text-transform: none; vertical-align: baseline">CHK</span>(ret);</div>
      <div class="Code"><a name="9004776">&nbsp;</a></div>
      <div class="Code"><a name="9004777">String dictionaryKey = </a><span class="Char_Blue" style="color: navy; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">"SharedKey1"</span>;</div>
      <div class="Code"><a name="9004778">&nbsp;</a></div>
      <div class="Code"><span class="Char_Green" style="color: green; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="9004779">/* Initial setting of the dictionary to the first cache */</a></span></div>
      <div class="Code"><a name="9004780">ret = cacheInstance1.setDictionary(dataDictionary, dictionaryKey, cacheError); </a><span class="Char_Underline" style="color: #666666; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; text-transform: none; vertical-align: baseline">CHK</span>(ret);</div>
      <div class="Code"><span class="Char_Green" style="color: green; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="9004781">/* Shared setting of the same dictionary to the second cache */</a></span></div>
      <div class="Code"><a name="9004782">ret = cacheInstance2.setSharedDictionaryKey(dictionaryKey, cacheError); </a><span class="Char_Underline" style="color: #666666; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-decoration: underline; text-transform: none; vertical-align: baseline">CHK</span>(ret);</div>
      <div class="Code"><span class="Char_Green" style="color: green; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="9004783">/* The dataDictionary can be destroyed after setting, but is typically retained by the<br />application for encoding and decoding. */</a></span></div>
      <div class="Code"><a name="9004784">&nbsp;</a></div>
      <div class="Code"><span class="Char_Green" style="color: green; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="9004785">/* Two cache instances are now ready for applying and retrieving data */</a></span></div>
      <div class="Code"><a name="9004786">&nbsp;</a></div>
      <div class="Code"><span class="Char_Green" style="color: green; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="9004787">/* Cleanup */</a></span></div>
      <div class="Code"><a name="9004788">cacheInstance1.destroy(); </a><span class="Char_Green" style="color: green; font-family: Arial; font-size: 10pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">/* destroys all entries and the cache instance */</span></div>
      <div class="Code"><a name="9004789">cacheInstance2.destroy();</a></div>
      <div class="Code"><a name="9004790">&nbsp;</a></div>
      <div class="Caption"><a name="9004791">Code Example 29: Creating Cache and Setting to Dictionary</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <hr align="left" />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="ETAJ_ValueAddDevGuide.1.271.html">Chapter 8	Payload Cache Detailed View</a> : <a class="WebWorks_Breadcrumb_Link" href="ETAJ_ValueAddDevGuide.1.273.html">8.2	Payload Cache</a> : <a class="WebWorks_Breadcrumb_Link" href="ETAJ_ValueAddDevGuide.1.277.html">8.2.4	Managing RDM Field Dictionaries for Payload Cache</a> : 8.2.4.2	Setting Example</div>
    <br />
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>